# üìã –°–ü–ò–°–û–ö –§–ê–ô–õ–û–í –°–ò–°–¢–ï–ú–´ –ü–û–î–ü–ò–°–û–ö

## üóÑÔ∏è –•–†–ê–ù–ò–õ–ò–©–ï –î–ê–ù–ù–´–• (JSON)
**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞

1. **`authorized_users.json`**
   - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –ø–æ–ª–µ `subscriptions`
   - –§–æ—Ä–º–∞—Ç: `{"8428349451": {"subscriptions": ["logistic-spy", "shadow-stack"]}}`
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `auth_service.py`

2. **`user_subscriptions.json`**
   - –î—É–±–ª–∏–∫–∞—Ç –ø–æ–¥–ø–∏—Å–æ–∫ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –§–æ—Ä–º–∞—Ç: `{"8428349451": ["logistic-spy", "shadow-stack"]}`
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `signal_api.py`

3. **`active_users.json`**
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `signal_api.py`

4. **`subscription_requests.json`**
   - –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `auth_api.py`

5. **`subscription_history.json`**
   - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–¥–ø–∏—Å–æ–∫
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `auth_service.py`

6. **`access_requests.json`**
   - –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥–æ—Å—Ç—É–ø
   - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** `auth_api.py`

---

## ‚öôÔ∏è BACKEND (Python)

### API –°–ï–†–í–ï–†–´

7. **`backend/signal_api.py`** ‚≠ê –ì–õ–ê–í–ù–´–ô
   - GET `/api/user/subscriptions?user_id=X` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
   - POST `/api/user/subscriptions` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
   - POST `/api/admin/grant-subscription` - –≤—ã–¥–∞—á–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (–∞–¥–º–∏–Ω)
   - DELETE `/api/admin/revoke-subscription` - –æ—Ç–∑—ã–≤ –ø–æ–¥–ø–∏—Å–∫–∏ (–∞–¥–º–∏–Ω)
   - **–ß–∏—Ç–∞–µ—Ç:** `user_subscriptions.json`
   - **–£–≤–µ–¥–æ–º–ª—è–µ—Ç:** WebSocket —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫

8. **`backend/auth_api.py`**
   - POST `/api/auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - GET `/api/user/<telegram_id>` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - **–ß–∏—Ç–∞–µ—Ç:** `authorized_users.json`

9. **`backend/auth_service.py`** ‚≠ê –ì–õ–ê–í–ù–´–ô
   - `grant_subscription(user_id, model_id)` - –≤—ã–¥–∞—á–∞ –ø–æ–¥–ø–∏—Å–∫–∏
   - `revoke_subscription(user_id, model_id)` - –æ—Ç–∑—ã–≤ –ø–æ–¥–ø–∏—Å–∫–∏
   - `get_user_subscriptions(user_id)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
   - **–ü–∏—à–µ—Ç:** `authorized_users.json` –∏ `user_subscriptions.json` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)

10. **`backend/websocket_server.py`** ‚≠ê –ì–õ–ê–í–ù–´–ô
    - WebSocket `/ws/{user_id}` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
    - POST `/notify-subscription-update` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    - **–§—É–Ω–∫—Ü–∏—è:** –†–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫

---

## üé® FRONTEND (React/JSX)

### –û–°–ù–û–í–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

11. **`src/App.jsx`** ‚≠ê –ì–õ–ê–í–ù–´–ô
    - `loadUserSubscriptions(userId)` - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ —Å API
    - `updateUserSubscription(userId, subscriptions)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
    - `userSubscriptions` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
    - `hasVipSubscription` - –ø—Ä–æ–≤–µ—Ä–∫–∞ VIP —Å—Ç–∞—Ç—É—Å–∞
    - **–õ–æ–≥–∏–∫–∞:** –£–¥–∞–ª—è–µ—Ç `logistic-spy` –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞
    - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** Hook `useWebSocket` –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

12. **`src/components/admin/UserSubscriptionManager.jsx`**
    - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (–∞–¥–º–∏–Ω)
    - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
    - –ö–Ω–æ–ø–∫–∏: "–ê–∫—Ç–∏–≤–Ω–∞", "–û—Ç–º–µ–Ω–∏—Ç—å"
    - **–í—ã–∑—ã–≤–∞–µ—Ç:** API `/api/admin/grant-subscription` –∏ `/api/admin/revoke-subscription`

### HOOKS (–ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú–ê–Ø –õ–û–ì–ò–ö–ê)

13. **`src/hooks/useWebSocket.js`** ‚≠ê –ì–õ–ê–í–ù–´–ô
    - WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `wss://bot.nomoneynohoney.online/ws/{userId}`
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π: `subscription_update`, `subscription_approved`, `subscription_rejected`
    - –ê–≤—Ç–æ–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
    - **Callback:** `onSubscriptionUpdate` - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨

14. **`src/features/admin/components/BulkOperations.jsx`**
    - –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
    - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** `useBulkUpdateSubscriptions` hook

15. **`src/features/admin/components/SubscriptionTemplates.jsx`**
    - –®–∞–±–ª–æ–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫
    - **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** `useSubscriptionTemplates` hook

### API –°–ï–†–í–ò–°–´

16. **`src/services/adminApi.js`**
    - `getAllUsers()` - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
    - `deleteUser()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - `getAccessRequests()` - –∑–∞–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–∞
    - `approveAccess()` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

---

## üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–•

### –í–´–î–ê–ß–ê –ü–û–î–ü–ò–°–ö–ò (–ê–¥–º–∏–Ω ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

1. –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "–ê–∫—Ç–∏–≤–∞—Ü—ñ—è" –≤ `UserSubscriptionManager.jsx`
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API: `POST /api/admin/grant-subscription` –≤ `signal_api.py`
3. `signal_api.py` –≤—ã–∑—ã–≤–∞–µ—Ç `auth_service.grant_subscription()`
4. `auth_service.py` –æ–±–Ω–æ–≤–ª—è–µ—Ç `authorized_users.json` –∏ `user_subscriptions.json`
5. `signal_api.py` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ `websocket_server.py`
6. `websocket_server.py` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: `{type: "subscription_update", subscriptions: [...]}`
7. `useWebSocket.js` –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `onSubscriptionUpdate()`
8. `App.jsx` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `userSubscriptions`
9. UI –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

### –ó–ê–ì–†–£–ó–ö–ê –ü–û–î–ü–ò–°–û–ö (–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–∞–π—Ç
2. `App.jsx` –≤—ã–∑—ã–≤–∞–µ—Ç `loadUserSubscriptions(userData.id)`
3. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è API: `GET /api/user/subscriptions?user_id=X` –≤ `signal_api.py`
4. `signal_api.py` —á–∏—Ç–∞–µ—Ç `user_subscriptions.json`
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
6. `App.jsx` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `userSubscriptions`
7. UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏

---

## üöÄ –ó–ê–ü–£–°–ö –°–ò–°–¢–ï–ú–´

**–§–∞–π–ª:** `–ó–ê–ü–£–°–ö_–†–ê–ë–û–ß–ï–ô_–°–ò–°–¢–ï–ú–´.bat`

–ó–∞–ø—É—Å–∫–∞–µ—Ç:
1. Telegram Bot
2. **API Server** (`backend/signal_api.py` –Ω–∞ –ø–æ—Ä—Ç—É 5000)
3. **WebSocket Server** (`backend/websocket_server.py` –Ω–∞ –ø–æ—Ä—Ç—É 8001)
4. Cloudflare Tunnel

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

1. **–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø** - `authorized_users.json` –∏ `user_subscriptions.json` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã
2. **WEBSOCKET** - –ë–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ `websocket_server.py` —Ä–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–ü–û–†–¢–´:**
   - API: `5000`
   - WebSocket: `8001`
4. **–ü–ï–†–ï–ó–ê–ü–£–°–ö** - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è backend –∫–æ–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å `–ó–ê–ü–£–°–ö_–†–ê–ë–û–ß–ï–ô_–°–ò–°–¢–ï–ú–´.bat`
5. **–î–ï–ü–õ–û–ô –§–†–û–ù–¢–ï–ù–î–ê** - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `src/App.jsx` –Ω—É–∂–Ω–æ:
   - `npm run build`
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `dist/*` –≤ `web/*`
   - `deploy_web_only.bat`
