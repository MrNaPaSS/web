#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import re
import os

def fix_unicode_in_file(filepath):
    """Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Unicode ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ğ² Ñ„Ğ°Ğ¹Ğ»Ğµ"""
    with open(filepath, 'r', encoding='utf-8', errors='ignore') as f:
        content = f.read()
    
    # Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ²ÑĞµ emoji ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ğ½Ğ° Ñ‚ĞµĞºÑÑ‚
    replacements = {
        'ğŸ”': '',
        'ğŸ’°': '',
        'ğŸ“Š': '',
        'ğŸ”‘': '',
        'ğŸ¯': '',
        'âš ï¸': '',
        'âŒ': '',
        'âœ…': '',
        'ğŸ“ˆ': '',
        'ğŸ”’': '',
        'ğŸ”“': '',
        'ğŸ“‹': '',
        'ğŸ”§': '',
        'âš™ï¸': '',
        'ğŸ”„': '',
        'ğŸš€': '',
        'ğŸ’¡': '',
        'ğŸ“': '',
        'ğŸ””': '',
        'ğŸ‰': '',
        'ğŸ”¥': '',
        'â­': '',
        'ğŸ’¯': '',
        'ğŸª': '',
        'ğŸ†': '',
        'ğŸ¥‡': '',
        'ğŸ¥ˆ': '',
        'ğŸ¥‰': '',
        'ğŸ­': '',
        'ğŸ¨': '',
        'ğŸ¬': '',
        'ğŸµ': '',
        'ğŸ¶': '',
        'ğŸ¸': '',
        'ğŸº': '',
        'ğŸ»': '',
        'ğŸ¹': '',
        'ğŸ¥': '',
        'ğŸ¤': '',
        'ğŸ§': '',
        'ğŸ“»': '',
        'ğŸ“º': '',
        'ğŸ“·': '',
        'ğŸ“¹': '',
        'ğŸ¥': '',
        'ğŸ’»': '',
        'ğŸ–¥ï¸': '',
        'ğŸ–¨ï¸': '',
        'âŒ¨ï¸': '',
        'ğŸ–±ï¸': '',
        'ğŸ–²ï¸': '',
        'ğŸ’½': '',
        'ğŸ’¾': '',
        'ğŸ’¿': '',
        'ğŸ“€': '',
        'ğŸ§®': '',
        'ğŸ²': '',
        'â™ ï¸': '',
        'â™¥ï¸': '',
        'â™¦ï¸': '',
        'â™£ï¸': '',
        'ğŸƒ': '',
        'ğŸ€„': '',
        'ğŸ´': '',
        'ğŸ¯': '',
        'ğŸ³': '',
        'ğŸ®': '',
        'ğŸ•¹ï¸': '',
        'ğŸ°': '',
        'ğŸ§©': '',
        'ğŸª': '',
        'ğŸ›¹': '',
        'ğŸ›·': '',
        'â›¸ï¸': '',
        'ğŸ¥Œ': '',
        'ğŸ¿': '',
        'ğŸ›¼': '',
        'ğŸ›¹': '',
        'ğŸ›·': '',
        'â›¸ï¸': '',
        'ğŸ¥Œ': '',
        'ğŸ¿': '',
        'ğŸ›¼': '',
        'ğŸ›¹': '',
        'ğŸ›·': '',
        'â›¸ï¸': '',
        'ğŸ¥Œ': '',
        'ğŸ¿': '',
        'ğŸ›¼': '',
        'ğŸ›¹': '',
        'ğŸ›·': '',
        'â›¸ï¸': '',
        'ğŸ¥Œ': '',
        'ğŸ¿': '',
        'ğŸ›¼': ''
    }
    
    for emoji, replacement in replacements.items():
        content = content.replace(emoji, replacement)
    
    # Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ»Ğ¸ÑˆĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
    content = re.sub(r'\s+', ' ', content)
    
    with open(filepath, 'w', encoding='utf-8') as f:
        f.write(content)
    
    print(f"Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ñ„Ğ°Ğ¹Ğ»: {filepath}")

if __name__ == "__main__":
    files_to_fix = [
        "fixed_comprehensive_analysis.py",
        "test_otc_generator.py",
        "test_api.py"
    ]
    
    for filename in files_to_fix:
        if os.path.exists(filename):
            fix_unicode_in_file(filename)
        else:
            print(f"Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: {filename}")
